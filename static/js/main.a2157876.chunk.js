(this.webpackJsonpviade_es5b=this.webpackJsonpviade_es5b||[]).push([[0],{1021:function(e,t){},1109:function(e,t,a){},1110:function(e,t,a){},1113:function(e,t,a){},1114:function(e,t,a){},1115:function(e,t,a){},1117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(59),o=a.n(i),s=(a(550),a(1)),c=a.n(s),u=a(9),l=a(7),d=a(8),p=a(15),m=a(16),h=a(122),f=a(109),g=a(56),b=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"getIdentityProviders",value:function(){return[{id:"inrupt",label:"Inrupt",image:"/viade_es5b/img/inrupt.svg",value:"https://inrupt.net/auth",registerLink:"https://inrupt.net/register",description:"Lorem ipsum dolor sit amet non ipsom dolor"},{id:"solid-community",label:"Solid Community",image:"/viade_es5b/img/community.png",value:"https://solid.community",registerLink:"https://solid.community/register",description:"Lorem ipsum dolor sit non consectetur"},{id:"local-pod-server",label:"Servidor Local",image:"/viade_es5b/img/server.png",value:"https://localhost:8443",registerLink:"https://localhost:8443/register",description:"Nuestro propio servidor de PODS"}]}}]),e}(),v=a(49),x=a(46);function y(){var e=Object(v.a)(["\n  background-image: linear-gradient(135deg, #7c4dff 0%, #18a9e6 50%, #01c9ea 100%);\n  background-repeat: no-repeat;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  position: relative;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url('/img/background-pattern.svg');\n    filter: opacity(30%);\n  }\n"]);return y=function(){return e},e}var E=x.default.div(y()),w=function(e){var t=e.children,a=e.className;return r.a.createElement(E,{className:a},t)};function k(){var e=Object(v.a)(["\n    @media (min-width: ","em) {\n      ","\n    }\n  "]);return k=function(){return e},e}var j={desktop:992,desktopSm:1024,tablet:768,phone:576},O=Object.keys(j).reduce((function(e,t){return e[t]=function(){return Object(x.css)(k(),j[t]/16,x.css.apply(void 0,arguments))},e}),{});function S(){var e=Object(v.a)(["\n    min-width: 420px;\n  "]);return S=function(){return e},e}function R(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  background: #ffffff;\n  border-radius: 4px;\n  box-sizing: border-box;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.3);\n  min-width: 310px;\n  min-height: 403px;\n  position: relative;\n  margin: auto;\n  padding: 40px;\n  text-align: center;\n\n  & > h1,\n  & > h2 {\n    padding: 0;\n    margin: 0;\n  }\n\n  @media screen and (max-width: 992px) {\n    width: auto;\n  }\n  ","\n"]);return R=function(){return e},e}var C=x.default.div(R(),O.tablet(S())),A=function(e){var t=e.children,a=e.className;return r.a.createElement(C,{className:a},t)};function I(){var e=Object(v.a)(["\n  color: #656e75;\n  font-family: Raleway;\n  font-size: 16px;\n  font-weight: 500;\n  letter-spacing: 1.2px;\n  line-height: 19px;\n  text-align: center;\n  position: relative;\n  margin: 30px 0;\n  display: inline-block;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &::before,\n  &::after {\n    width: 32%;\n    content: '';\n    background: #656e75;\n    height: 1px;\n    box-sizing: border-box;\n    top: 50%;\n  }\n\n  span {\n    padding: 0 5px;\n  }\n\n  &::before {\n    right: 0;\n  }\n\n  &::after {\n    left: 0;\n  }\n"]);return I=function(){return e},e}function N(){var e=Object(v.a)(["\n  display: grid;\n  flex-direction: column;\n\n  .provider-login-component {\n    div[role='option'] {\n      text-align: left !important;\n      padding-left: 20px;\n    }\n  }\n"]);return N=function(){return e},e}function D(){var e=Object(v.a)([""]);return D=function(){return e},e}function F(){var e=Object(v.a)(["\n  h1 {\n    color: #ffffff;\n  }\n  margin-top: 60px;\n"]);return F=function(){return e},e}var T=Object(x.default)(w)(F()),L=Object(x.default)(A)(D()),P=x.default.div(N());x.default.span(I());function H(){var e=Object(v.a)(["\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n\n  h1 {\n    box-sizing: border-box;\n    padding: 0;\n    font-size: 28px;\n    color: rgb(40, 55, 82);\n    letter-spacing: 1.4px;\n    line-height: 40px;\n    text-align: center;\n    margin: 40px 0;\n    font-weight: bold;\n  }\n"]);return H=function(){return e},e}var M=x.default.section(H()),U=function(e){var t=e.children,a=e.className;return r.a.createElement(M,{className:a},r.a.createElement("div",{className:"wrapper"},t))},z=function(){return r.a.createElement(T,{"data-testid":"login-wrapper"},r.a.createElement(U,null,r.a.createElement("h1",null,"Login en Viade"),r.a.createElement(L,{className:"login-panel"},r.a.createElement(P,{className:"panel-body"},r.a.createElement(g.ProviderLogin,{className:"solid-provider-login-component",callbackUri:"".concat(window.location.protocol,"//").concat(window.location.host,"/viade_es5b/#/"),selectPlaceHolder:"Seleccione su proveedor",inputPlaceholder:"Introduza la url de su webId",formButtonText:"Login",btnTxtWebId:"Login con el WebId",btnTxtProvider:"Login con el proveedor",errorsText:{unknown:"Algo no va bien, prueba de nuevo...",webIdNotValid:"WebID no es v\xe1lido",emptyProvider:"Proveedor Solid es necesario",emptyWebId:"WebId es necesario"},providers:b.getIdentityProviders()})))))},B=a(51),q=function(e){var t=e.data,a=e.onSelect,n=e.radioName,i=e.id,o=e.checked;return r.a.createElement("div",{className:"img-group"},r.a.createElement("input",{type:"radio",name:n,id:i,onChange:a,value:t.registerLink,checked:o}),r.a.createElement("img",{src:t.image,alt:"",width:"50",height:"50"}),r.a.createElement("span",{className:"label"},t.label))};function V(){var e=Object(v.a)(["\n  height: 32px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n\n  button {\n    height: 32px;\n    width: 150px;\n    border-radius: 4px;\n    font-family: Raleway;\n    font-size: 10px;\n    font-weight: bold;\n    letter-spacing: 0.89px;\n    line-height: 11px;\n    text-align: center;\n    text-transform: uppercase;\n    border: solid 2px #449df5;\n    box-sizing: border-box;\n  }\n\n  .btn-solid {\n    background-color: #449df5;\n    color: #ffffff;\n  }\n\n  .btn-outlined {\n    background-color: #ffffff;\n    color: #449df5;\n    filter: opacity(40%);\n  }\n"]);return V=function(){return e},e}function _(){var e=Object(v.a)(["\n  height: 100% !important;\n  animation: fadeIn 0.2s ease-in;\n\n  a {\n    display: block;\n    color: #449df5;\n    font-family: Raleway;\n    font-size: 12px;\n    font-weight: 600;\n    letter-spacing: 0.75px;\n    line-height: 14px;\n    text-align: center;\n    text-decoration: none;\n\n    &:hover {\n      font-weight: 700;\n    }\n  }\n\n  .a-with-spacing {\n    margin: 24px 0;\n  }\n\n  ul {\n    padding: 0;\n    margin: 0;\n  }\n"]);return _=function(){return e},e}function W(){var e=Object(v.a)(["\n  position: relative;\n\n  h2 {\n    position: relative;\n    padding: 0;\n    color: #5361fd;\n    font-family: Raleway;\n    font-size: 20px;\n    font-weight: bold;\n    letter-spacing: 0.75px;\n    line-height: 24px;\n    text-align: center;\n    margin: 0;\n    animation: fadeIn 0.5s ease-in;\n  }\n\n  .progress-bar {\n    position: absolute;\n    height: 1px;\n    width: 100%;\n    background: #5361fd;\n    top: 30px;\n  }\n"]);return W=function(){return e},e}function K(){var e=Object(v.a)(["\n  justify-content: space-between;\n"]);return K=function(){return e},e}function G(){var e=Object(v.a)(["\n  h1 {\n    color: #ffffff;\n  }\n\n  //Todo: figure out why this is necessary\n  margin-top: 100px;\n"]);return G=function(){return e},e}var J=x.default.section(G()),$=Object(x.default)(A)(K()),Q=x.default.div(W()),Y=x.default.div(_()),Z=x.default.div(V()),X=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).next=function(){var e=n.state,t=e.canContinue,a=e.register.provider,r=window.location,i=r.protocol,o=r.host;t&&(window.location="".concat(a,"?returnToUrl=").concat(i,"//").concat(o,"/viade_es5b/#/"))},n.selectProvider=function(e){var t=n.state.register;n.setState({register:Object(B.a)({},t,{provider:e.target.value}),canContinue:!0})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.canContinue,r=t.register.provider,i=window.location,o=i.protocol,s=i.host;a&&(window.location="".concat(r,"?returnToUrl=").concat(o,"//").concat(s,"/viade_es5b"))},n.state={canContinue:!1,register:{provider:""}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.canContinue,i=t.register.provider,o=this.props.providers;return r.a.createElement(w,null,r.a.createElement(U,null,r.a.createElement(J,{className:"register-wrapper"},r.a.createElement("h1",{className:"title"},"Sign up en Viade"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement($,{className:"register-panel"},r.a.createElement(Q,{className:"panel-header"},r.a.createElement("h2",null,"Selecciona proveedor"),r.a.createElement("div",{className:"progress-bar"})),r.a.createElement(Y,{className:"panel-body"},r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"https://solid.inrupt.com/how-it-works",target:"_blank",rel:"noopener noreferrer"},"\xbfQue es un proveedor?"),r.a.createElement(h.b,{to:"/login",className:"a-with-spacing"},"LogIn"),r.a.createElement("ul",null,o.map((function(t){return r.a.createElement(q,{className:"providerItem",data:t,key:t.id,onSelect:e.selectProvider,radioName:"providerRadio",id:"radio-".concat(t.id),checked:t.registerLink===i})}))))),r.a.createElement(Z,{className:"actions"},r.a.createElement("button",{className:"btn-solid",onClick:this.next,type:"submit",disabled:!a},"Continuar")))))))}}]),a}(n.Component),ee=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={providers:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getIdentityProviders();case 2:t=e.sent,this.setState({providers:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.providers;return r.a.createElement(X,Object.assign({providers:e},this.props))}}]),a}(n.Component),te=a(1125),ae=a(1144),ne=a(1138),re=a(1145),ie=function(){var e=Object(g.useWebId)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{"data-testid":"Logged"},r.a.createElement("h3",{"data-testid":"logged"},"Hola ",r.a.createElement(ne.a,{src:"user.name"}),", has iniciado sesi\xf3n con este WebID:"),r.a.createElement(te.a,{variant:"success"},e)),r.a.createElement(re.a,{"data-testid":"noLogged"},r.a.createElement(te.a,{"data-testid":"noLogged",variant:"warning"},"A\xfan no has iniciado sesi\xf3n. ",r.a.createElement("a",{"data-testid":"noLogged2",href:"#/login"},"Iniciar sesi\xf3n"))))},oe=(a(270),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h1",{"data-testid":"welcome",className:"display-2 mb-4"},"\xa1Bienvenido a Viade!"),r.a.createElement(ie,null)),r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h3",{"data-testid":"header-title",className:"display-4"},"\xbfQu\xe9 es Viade-Rutas?"),r.a.createElement("p",{"data-testid":"p1",className:"parrafo-central"},"Viade-Rutas es un proyecto desarrollado por un grupo de alumnos de la Escuela de Ingenier\xeda Inform\xe1tica del Software, en Oviedo, para la asignatura de Arquitectura del Software."),r.a.createElement("p",{"data-testid":"p2",className:"parrafo-central"},"Se trata de una aplicaci\xf3n descentralizada, es decir, los datos con los que trabaja no se almacenan en una base de datos central, sino que cada usuario dispone de su propio espacio de almacenamiento, que recibe el nombre de POD. Es aqu\xed donde se almacenan los datos del usuario junto con sus rutas, fotos, comentarios y adem\xe1s dispone de la responsabilidad total sobre esos datos.")))}}]),a}(n.Component)),se=a(1139),ce=a(1128),ue=a(1140),le=a(1131),de=a(1142),pe=a(1129),me=a(1130),he=a(532),fe=a(1132),ge=a(234),be=a(24),ve=(a(271),a(1146)),xe=a(1147),ye=a(1126),Ee=a(1148),we=a(1141),ke=a(31),je=a.n(ke),Oe=new je.a.Icon.Default,Se=new je.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});new je.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),new je.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),new je.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),new je.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});delete je.a.Icon.Default.prototype._getIconUrl,je.a.Icon.Default.mergeOptions({iconRetinaUrl:a(469),iconUrl:a(470),shadowUrl:a(471)});var Re=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).ruta=n.props.ruta,n.mapID="mapa-".concat(n.props.ruta.getNombre()),n.hitos=n.getCoords(n.props.ruta),n.zoom=10,n.inicio=n.props.ruta.getInicio(),n.refMapa=r.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(ve.a,{ref:this.props.refMapa,center:this.inicio,zoom:this.zoom},r.a.createElement(xe.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.drawRoute())}},{key:"getMarker",value:function(e,t,a){return r.a.createElement(ye.a,{key:a,position:e},r.a.createElement(Ee.a,null,t))}},{key:"getStartMarker",value:function(){return r.a.createElement(ye.a,{key:0,position:this.inicio,icon:Se},r.a.createElement(Ee.a,null,"Inicio: ".concat(this.ruta.getNombre())))}},{key:"getPolyLine",value:function(){var e=[];return e.push.apply(e,[this.inicio].concat(Object(be.a)(this.hitos.map((function(e){return[e.lat,e.long]}))))),r.a.createElement(we.a,{color:"red",positions:e})}},{key:"drawRoute",value:function(){var e=this;return r.a.createElement("div",null,this.getStartMarker(),this.hitos.map((function(t,a){return e.getMarker([t.lat,t.long],t.hito,a++)})),this.getPolyLine())}},{key:"getCoords",value:function(e){var t=e.getHitos(),a=[];for(var n in e.getHitos()){var r=t[n].getNombre(),i=t[n].getLat(),o=t[n].getLong();a.push({hito:r,lat:i,long:o})}return a}}]),a}(n.Component),Ce=(a(930),a(1127)),Ae=a(1137),Ie=function(){function e(t,a){Object(l.a)(this,e),this.fecha=t,this.texto=a}return Object(d.a)(e,[{key:"getFecha",value:function(){return this.fecha}},{key:"setFecha",value:function(e){this.fecha=e}},{key:"getAutor",value:function(){return this.autor}},{key:"setAutor",value:function(e){this.autor=e}},{key:"getTexto",value:function(){return this.texto}},{key:"setTexto",value:function(e){this.texto=e}},{key:"getFormattedDate",value:function(){var e="";return null!=this.fecha&&(e="Publicado: "+this.fecha.getDate()+"/"+(this.fecha.getMonth()+1)+"/"+this.fecha.getFullYear()+" "+this.fecha.getHours()+":"+(this.fecha.getMinutes()<10?"0":"")+this.fecha.getMinutes()+":"+this.fecha.getSeconds()),e}},{key:"toString",value:function(){}}]),e}(),Ne=(a(931),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={comment:"",commentList:[],onlyRead:e.props.onlyRead,loading:!0,empty:!1,loaded:!1},e.handleOnChange=function(t){e.setState({comment:t.target.value})},e.handleAddComment=Object(u.a)(c.a.mark((function t(){var a,n,r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,empty:!1}),a=e.state.comment,n=new Date,r=e.props.ruta.getUUID(),e.setState({comment:""}),i=new Ie(n,a),o=null==e.props.author?null:e.props.author.getWebId(),t.next=9,e.props.comentarRuta(i,r,o);case 9:if(!t.sent){t.next=11;break}e.loadComments();case 11:case"end":return t.stop()}}),t)}))),e.loadComments=Object(u.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=e.props.ruta.getUUID(),n=null==e.props.author?null:e.props.author.getWebId(),t.t0=e,t.next=6,e.props.obtenerComentariosRuta(a,n);case 6:t.t1=t.sent,t.t2={commentList:t.t1,loading:!1},t.t0.setState.call(t.t0,t.t2),e.setState({empty:0===e.state.commentList.length});case 10:case"end":return t.stop()}}),t)}))),e.handleClick=function(){e.state.loaded||(e.loadComments(),e.setState({loaded:!0}))},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(se.a,{"data-testid":"Acordeon"},r.a.createElement(de.a,{"data-testid":"cardEnv"},r.a.createElement(de.a.Header,null,r.a.createElement(se.a.Toggle,{as:ge.a,variant:"link",eventKey:"0","data-testid":"btComment",onClick:this.handleClick},"Comentarios")),r.a.createElement(se.a.Collapse,{eventKey:"0"},r.a.createElement(de.a.Body,null,!this.state.onlyRead&&r.a.createElement("div",null,r.a.createElement(Ce.a,{"data-testid":"cajaComent"},r.a.createElement(Ae.a.Control,{placeholder:"Haz un comentario...",as:"textarea",rows:"2",value:this.state.comment,onChange:this.handleOnChange,"data-testid":"commentRoute"})),r.a.createElement(ge.a,{"data-testid":"btPublicar",className:"mt-2 mb-2",variant:"success",onClick:this.handleAddComment},"Publicar")),this.state.loading&&r.a.createElement(ce.a,{className:"mt-2",as:"span",animation:"border",role:"status"}),this.state.empty&&r.a.createElement(te.a,{variant:"warning"},"A\xfan no hay comentarios"),this.state.commentList.length>0&&r.a.createElement("div",{className:"scroll-container"},this.state.commentList.map((function(e,t){return r.a.createElement(de.a,{className:"mb-4 mr-2","data-testid":"cajaComentario",key:t++},r.a.createElement(de.a.Header,null,"".concat(e.getAutor().getNombre()," ").concat(e.getFormattedDate())),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Text,null,e.getTexto())))})))))))}}]),a}(n.Component)),De=a(533),Fe=a.n(De),Te=a(534),Le=a.n(Te),Pe=a(535),He=a.n(Pe),Me=(a(979),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={route:n.props.ruta,imageList:[],selectedImages:[],ableToUpload:!1,loading:!0,loaded:!1,empty:!1,onlyRead:n.props.onlyRead},n.onChangeHandler=function(e){n.setState({selectedImages:e.target.files,ableToUpload:e.target.files.length>0})},n.handleUpload=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0,empty:!1}),t=null==n.props.author?null:n.props.author.getWebId(),e.next=4,n.props.subirFicheroARuta(n.state.selectedImages,n.state.route.getUUID(),t);case 4:if(!e.sent){e.next=6;break}n.loadImages();case 6:case"end":return e.stop()}}),e)}))),n.loadImages=Object(u.a)(c.a.mark((function e(){var t,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.state.route.getUUID(),a=null==n.props.author?null:n.props.author.getWebId(),e.next=5,n.props.obtenerFicherosRuta(t,a);case 5:r=e.sent,i=r.map((function(e){return{src:e,thumbnail:e,thumbnailWidth:n.tWidth,thumbnailHeight:n.tHeight}})),n.setState({imageList:i,loading:!1,empty:0===i.length});case 8:case"end":return e.stop()}}),e)}))),n.handleOnClick=function(){n.state.loaded||(n.loadImages(),n.setState({loaded:!0}))},n.tWidth=85,n.tHeight=85,n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){He()(document).ready((function(){Le.a.init()})),this.loadImages()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Title,null,"Galer\xeda")),r.a.createElement(de.a.Body,null,r.a.createElement(Fe.a,{images:this.state.imageList}),this.state.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{className:"mr-2",as:"span",animation:"border",role:"status"}),"Cargando im\xe1genes..."),this.state.empty&&r.a.createElement(te.a,{variant:"warning"},"A\xfan no hay im\xe1genes.")),r.a.createElement(de.a.Footer,null,!this.state.onlyRead&&r.a.createElement(pe.a,{fluid:!0},r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(Ae.a,{className:"input-img"},r.a.createElement(Ae.a.File,{label:"Selecciona una imagen",multiple:!0,accept:"image/*",custom:!0,onChange:this.onChangeHandler,"data-browse":"Examinar"}))),r.a.createElement(he.a,null,r.a.createElement(ge.a,{className:"mt-2",variant:"success",onClick:this.handleUpload,disabled:!this.state.ableToUpload},"Subir")))))))}},{key:"getBaseUrl",value:function(){var e=window.location;return e.protocol+"//"+e.host}}]),a}(n.Component)),Ue=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isDeleting:!1,clickOnPointTooltip:!0},n.handleIsDeleting=function(){return n.state.isDeleting?r.a.createElement("div",null,r.a.createElement(ce.a,{className:"mr-2",as:"span",size:"sm",animation:"border",role:"status"}),"Eliminando..."):"Eliminar"},n.delete=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isDeleting:!0}),e.next=3,n.props.handleDelete(n.props.ruta.getUUID(),n.props.ruta.getNombre());case 3:n.setState({isDeleting:!1});case 4:case"end":return e.stop()}}),e)}))),n.flyToPoint=function(e){n.setState({clickOnPointTooltip:!1}),n.props.flyTo(e,14,n.refMapa)},n.showClickOnPointTooltip=function(){return r.a.createElement(ue.a,{target:n.refTablaHitos,show:n.state.clickOnPointTooltip,placement:"top"},(function(e){return r.a.createElement(le.a,Object.assign({"data-testid":"tooltip"},e),"Puedes hacer click sobre un hito para centrarlo en el mapa.")}))},n.refMapa=r.a.createRef(),n.refTablaHitos=r.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.flyTo({lat:this.props.ruta.getInicio()[0],lng:this.props.ruta.getInicio()[1]},13,this.refMapa)}},{key:"render",value:function(){var e=this;return r.a.createElement(de.a,null,r.a.createElement(de.a.Header,null,r.a.createElement("h3",{"data-testid":"r-title"},this.props.ruta.getNombre()),this.props.permisosValidos&&r.a.createElement(ge.a,{"data-testid":"rb-compartir",variant:"success",className:"mr-2",onClick:function(){return e.props.handleShare(e.props.ruta)}},"Compartir"),!this.props.permisosValidos&&r.a.createElement(ge.a,{"data-testid":"rb-compartir",variant:"warning",className:"mr-2",disabled:!0},"Compartir"),r.a.createElement(ge.a,{"data-testid":"rb-eliminar",variant:"danger",onClick:function(){return e.delete()}},this.handleIsDeleting())),r.a.createElement(de.a.Body,null,r.a.createElement(pe.a,{fluid:!0},r.a.createElement(me.a,null,r.a.createElement(he.a,{md:8},r.a.createElement(me.a,null,r.a.createElement(he.a,{md:"auto"},r.a.createElement(de.a.Title,null,"Descripci\xf3n"),r.a.createElement(de.a.Text,{"data-testid":"r-description"},this.props.ruta.getDescripcion()),r.a.createElement(de.a.Title,null,"Hitos"),this.showClickOnPointTooltip(),r.a.createElement(fe.a,{striped:!0,bordered:!0,hover:!0,ref:this.refTablaHitos},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Latitud"),r.a.createElement("th",null,"Longitud"))),r.a.createElement("tbody",{"data-testid":"r-hitos"},r.a.createElement("tr",{onClick:function(){return e.flyToPoint({lat:e.props.ruta.getInicio()[0],lng:e.props.ruta.getInicio()[1]})}},r.a.createElement("td",null,r.a.createElement("b",null,"Inicio")),r.a.createElement("td",null,this.props.ruta.getInicio()[0]),r.a.createElement("td",null,this.props.ruta.getInicio()[1])),this.props.ruta.getHitos().map((function(t,a){return r.a.createElement("tr",{key:a++,onClick:function(){return e.flyToPoint({lat:t.getLat(),lng:t.getLong()})}},r.a.createElement("td",null,t.getNombre()),r.a.createElement("td",null,t.getLat()),r.a.createElement("td",null,t.getLong()))}))))),r.a.createElement(he.a,null,r.a.createElement(Ne,{author:null,ruta:this.props.ruta,onlyRead:!1,comentarRuta:this.props.comentarRuta,obtenerComentariosRuta:this.props.obtenerComentariosRuta}))),r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(Me,{author:null,ruta:this.props.ruta,onlyRead:!1,subirFicheroARuta:this.props.subirFicheroARuta,obtenerFicherosRuta:this.props.obtenerFicherosRuta})))),r.a.createElement(he.a,{md:4},r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement("div",{id:"mapa-".concat(this.props.ruta.getNombre()),className:"ml-3 mb-3"},this.props.showMap&&r.a.createElement(Re,{className:"map",ruta:this.props.ruta,"data-testid":"mapa",refMapa:this.refMapa})))))))))}}]),a}(n.Component),ze=a(1136),Be=a(1143),qe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.clickItem=function(e){var t=n.state.selected;t[e]=!t[e],n.setState({selected:t}),n.state.selected[e]?n.props.add(n.amigos[e]):n.props.delete(n.amigos[e])},n.amigos=e.amigos,n.state={selected:n.amigos.map((function(e){return!1}))},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Be.a,{"data-testid":"envoltorio"},this.amigos.map((function(t,a){return r.a.createElement(Be.a.Item,{"data-testid":"itemLista",className:!0===e.state.selected[a]?"active mb-1":"mb-1",key:a++,onClick:function(){return e.clickItem(a-1)}},r.a.createElement("img",{src:null!==t.getFoto()?t.getFoto():"/viade_es5b/img/defaultProfile.png",className:"rounded-circle img-fluid",alt:"",width:"50",height:"50"}),t.getNombre())})))}}]),a}(n.Component),Ve=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={amigos:[],loadingFriends:!0},n.addFriend=function(e){n.selectedFriends.push(e)},n.deleteFriend=function(e){var t=n.selectedFriends.indexOf(e);-1!==t&&n.selectedFriends.splice(t,1)},n.share=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.selectedFriends.length)){e.next=7;break}return e.next=4,n.props.shareRuta(n.selectedFriends[t].getWebId(),n.ruta.getUUID());case 4:t++,e.next=1;break;case 7:n.props.cancel();case 8:case"end":return e.stop()}}),e)}))),n.ruta=e.ruta,n.selectedFriends=[],n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.props.getAmigos();case 3:e.t1=e.sent,e.t2={amigos:e.t1,loadingFriends:!1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(ze.a,{"data-testid":"componenteModal",show:this.props.show,size:"lg",centered:!0},r.a.createElement(ze.a.Header,null,r.a.createElement(ze.a.Title,{"data-testid":"titleCompartir"},"Compartir esta ruta")),r.a.createElement(ze.a.Body,null,r.a.createElement("h4",{"data-testid":"nombreRutaCompartir"},"Ruta: ",this.props.ruta.getNombre()),r.a.createElement("p",{"data-testid":"parrafoSeleccion"},"Selecciona a los amigos con los que deseas compartir esta ruta:"),this.state.loadingFriends&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{className:"mr-2",as:"span",animation:"border",role:"status"}),"Cargando amigos..."),!this.state.loadingFriends&&r.a.createElement(qe,{amigos:this.state.amigos,add:this.addFriend,delete:this.deleteFriend,"data-testid":"Selector"})),r.a.createElement(ze.a.Footer,null,r.a.createElement(ge.a,{"data-testid":"cancelarCompartirButton",variant:"secondary",onClick:this.props.cancel},"Cancelar"),r.a.createElement(ge.a,{"data-testid":"compartirButton",variant:"success",onClick:this.share},"Compartir")))}}]),a}(n.Component),_e=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleDeleteRoute=function(){var e=Object(u.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.deleteRuta(t,a);case 2:r=e.sent,n.setState({rutas:r,emptyList:0===r.length});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleShare=function(e){n.setState({routeToShare:e,showSharePanel:!0})},n.cancelShare=function(){n.setState({routeToShare:null,showSharePanel:!1})},n.toggleSharePanel=function(){return n.state.showSharePanel&&r.a.createElement(Ve,{ruta:n.state.routeToShare,show:n.state.showSharePanel,cancel:n.cancelShare,getAmigos:n.props.getAmigos,shareRuta:n.props.shareRuta})},n.state={rutas:[],permisosValidos:!0,showSharePanel:!1,routeToShare:null,emptyList:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getRutas();case 2:return t=e.sent,e.next=5,this.props.permisosValidos;case 5:a=e.sent,this.setState({rutas:t,permisosValidos:a,emptyList:0===t.length}),this.props.handleLoaded();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(se.a,{"data-testid":"acordeon",defaultActiveKey:"0"},!this.state.permisosValidos&&r.a.createElement(te.a,{"data-testid":"alerta",variant:"warning"},"La aplicaci\xf3n no dispone de los suficientes permisos para compartir rutas. debe dar permiso a la aplicaci\xf3n para controlar los permisos de los recursos."),this.state.emptyList&&r.a.createElement(te.a,{"data-testid":"alerta_no_rutas",variant:"warning"},"Actualmente no dispones de ninguna ruta en tu POD. Accede a",r.a.createElement("a",{href:"#/add-ruta"}," A\xf1adir Ruta ")," para a\xf1adir una nueva ruta."),this.state.rutas.length>0&&this.state.rutas.map((function(t,a){return r.a.createElement(Ue,{role:"r-card",handleDelete:e.handleDeleteRoute,handleShare:e.handleShare,ruta:t,key:a++,subirFicheroARuta:e.props.subirFicheroARuta,obtenerFicherosRuta:e.props.obtenerFicherosRuta,comentarRuta:e.props.comentarRuta,obtenerComentariosRuta:e.props.obtenerComentariosRuta,showMap:e.props.showMap,permisosValidos:e.state.permisosValidos,flyTo:e.props.flyTo})})),this.toggleSharePanel())}}]),a}(n.Component),We=a(225),Ke=a.n(We),Ge=a(538),Je=a.n(Ge),$e=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(Ke.a,{active:this.props.loading,spinner:r.a.createElement(Je.a,{size:25,color:"#50E3C2",css:{display:"block",margin:"0 20vh 5vh"}}),text:this.props.text,styles:{wrapper:{width:"100%",height:"100vh"}}},this.props.children)}}]),a}(n.Component),Qe=function(){function e(t,a,n){Object(l.a)(this,e),this.nombre=t,this.longitud=n,this.latitud=a}return Object(d.a)(e,[{key:"getNombre",value:function(){return this.nombre}},{key:"getLong",value:function(){return this.longitud}},{key:"getLat",value:function(){return this.latitud}},{key:"toString",value:function(){}}]),e}(),Ye=a(227),Ze=function(){function e(t,a,n){Object(l.a)(this,e),this.uuid=Object(Ye.v4)(),this.nombre=t,this.inicio=a,this.descripcion=n,this.hitos=[],this.comentarios=[],this.ficheros=[]}return Object(d.a)(e,[{key:"getNombre",value:function(){return this.nombre}},{key:"getInicio",value:function(){return this.inicio}},{key:"getHitos",value:function(){return this.hitos}},{key:"getDescripcion",value:function(){return this.descripcion}},{key:"getUUID",value:function(){return this.uuid}},{key:"setUUID",value:function(e){this.uuid=e}},{key:"getComentarios",value:function(){return this.comentarios}},{key:"setComentarios",value:function(e){this.comentarios=e}},{key:"addComentario",value:function(e){this.comentarios.push(e)}},{key:"addFichero",value:function(e){this.ficheros.push(e)}},{key:"setFicheros",value:function(e){this.ficheros=e}},{key:"getFicheros",value:function(){return this.ficheros}},{key:"addHito",value:function(e){this.hitos.push(e)}},{key:"setHitos",value:function(e){for(var t in this.hitos=[],e)this.hitos.push(new Qe(e[t].nombre,e[t].latitud,e[t].longitud))}},{key:"toString",value:function(){}}]),e}(),Xe=a(12),et=a(19),tt=a(30);function at(){return(at=Object(u.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,tt.currentSession();case 3:return(n=e.sent)||(window.location.href="/login"),r="private/viade_es5b/routes/"+t.getUUID()+".ttl",i=n.webId,e.next=9,nt(i,r);case 9:return a=e.sent,e.next=12,it(i,r,t);case 12:return a=e.sent,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:return n=e.sent,r=n.getSubject(t),i=r.getRef(Xe.d.storage),o=i+a,s=Object(et.a)(o),e.next=9,s.save();case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,a){return ot.apply(this,arguments)}function ot(){return(ot=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:return r=e.sent,e.next=5,Object(et.b)(r.getSubject(t).getRef(Xe.d.storage)+a);case 5:if(i=e.sent,!n.getInicio()){e.next=17;break}o=0;case 8:if(!(o<=n.getHitos().length)){e.next=17;break}return s=i.addSubject({identifier:o,identifierPrefix:"point"}),0===o?(null!=n.getInicio().nombre&&s.addString(Xe.c.name,n.getInicio().nombre),s.addDecimal(Xe.c.latitude,n.getInicio()[0]),s.addDecimal(Xe.c.longitude,n.getInicio()[1]),s.addInteger("http://arquisoft.github.io/viadeSpec/order",o)):(s.addString(Xe.c.name,n.getHitos()[o-1].getNombre()),s.addDecimal(Xe.c.latitude,n.getHitos()[o-1].getLat()),s.addDecimal(Xe.c.longitude,n.getHitos()[o-1].getLong()),s.addInteger("http://arquisoft.github.io/viadeSpec/order",o)),s.addRef(Xe.b.type,"http://arquisoft.github.io/viadeSpec/points"),e.next=14,i.save([s]);case 14:o++,e.next=8;break;case 17:return(u=i.addSubject({identifier:"ruta"})).addRef(Xe.b.type,"http://arquisoft.github.io/viadeSpec/route"),u.addString(Xe.c.name,n.getNombre()),u.addString(Xe.c.description,n.getDescripcion()),u.addString(Xe.c.identifier,n.getUUID()),u.addRef("http://arquisoft.github.io/viadeSpec/points","http://arquisoft.github.io/viadeSpec/points"),e.next=25,i.save([u]);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var st=a(30),ct=new(a(488))(st);function ut(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(u.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:return a=e.sent,n=a.getSubject(t),e.abrupt("return",n.getRef(Xe.d.storage));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.readFolder(t).then((function(e){a=e})).catch((function(e){return a=null}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=Object(u.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt(t);case 2:if(!(n=e.sent)){e.next=11;break}r=0;case 5:if(!(r<n.files.length)){e.next=11;break}if(n.files[r].name!==a){e.next=8;break}return e.abrupt("return",!0);case 8:r++,e.next=5;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,ct.delete(t).then((function(){a=!0})).catch((function(e){return a=!1}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt=function(){function e(t,a,n){Object(l.a)(this,e),this.nombre=t,this.webId=a,this.foto=n}return Object(d.a)(e,[{key:"getNombre",value:function(){return this.nombre}},{key:"getWebId",value:function(){return this.webId}},{key:"getFoto",value:function(){return this.foto}},{key:"toString",value:function(){}}]),e}();function vt(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(u.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:return a=e.sent,n=a.getSubject(t),r=new bt(n.getString("http://xmlns.com/foaf/0.1/name"),t,n.getRef("http://www.w3.org/2006/vcard/ns#hasPhoto")),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(u.a)(c.a.mark((function e(t){var a,n,r,i,o,s,u,l,d,p,m,h,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,Object(et.b)(t).then((function(e){a=e})).catch((function(e){return a=null}));case 3:if(null==a){e.next=32;break}for(e.prev=4,r=a.getSubject("#ruta"),i=a.getSubjectsOfType("http://arquisoft.github.io/viadeSpec/points"),(n=new Ze(r.getString(Xe.c.name),[i[0].getDecimal(Xe.c.latitude),i[0].getDecimal(Xe.c.longitude)],r.getString(Xe.c.description))).setUUID(r.getString(Xe.c.identifier)),o=[],s=1;s<i.length;s++)o.push({nombre:i[parseInt(s)].getString(Xe.c.name),latitud:i[parseInt(s)].getDecimal(Xe.c.latitude),longitud:i[parseInt(s)].getDecimal(Xe.c.longitude),orden:i[s].getInteger("http://arquisoft.github.io/viadeSpec/order")});o=o.sort(wt),n.setHitos(o),u=a.getSubjectsOfType("http://arquisoft.github.io/viadeSpec/userComment"),l=0;case 15:if(!(l<u.length)){e.next=25;break}return d=new Ie(u[l].getDateTime(Xe.c.datePublished),u[l].getString(Xe.c.text)),e.next=19,vt(u[l].getRef(Xe.c.author));case 19:p=e.sent,d.setAutor(p),n.addComentario(d);case 22:l++,e.next=15;break;case 25:for(m=a.getSubjectsOfType(Xe.c.MediaObject),h=0;h<m.length;h++)f=m[h].getRef(Xe.c.contentUrl),n.addFichero(f);e.next=32;break;case 29:return e.prev=29,e.t0=e.catch(4),e.abrupt("return",null);case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e,null,[[4,29]])})))).apply(this,arguments)}function wt(e,t){return e.orden-t.orden}function kt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t);case 2:return n=e.sent,i=null,e.next=6,Object(et.b)(n+"private/viade_es5b/routes/"+a+".ttl").then((function(e){r=e})).catch((function(e){return r=null}));case 6:return null!=r&&(o=r.getSubject("#ruta"),o.getString(Xe.c.identifier)===a&&(i=n+"private/viade_es5b/routes/"+a+".ttl")),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){return St.apply(this,arguments)}function St(){return(St=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,mt(t+"private/viade_es5b","mySharedRoutes.ttl");case 3:if(!e.sent){e.next=18;break}return e.next=7,Object(et.b)(t+"private/viade_es5b/mySharedRoutes.ttl");case 7:r=e.sent,i=r.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),o=0;case 10:if(!(o<i.length)){e.next=18;break}if(i[o].getLiteral(Xe.c.identifier)!==a){e.next=15;break}for(s=i[parseInt(o)].getAllRefs(Xe.c.agent),u=0;u<s.length;u++)l=s[u].replace(/([^:]\/)\/+/g,"$1"),n=[].concat(Object(be.a)(n),[l]);return e.abrupt("break",18);case 15:o++,e.next=10;break;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t);case 2:return n=e.sent,e.next=5,Ot(n,a);case 5:return r=e.sent,i=n+"private/viade_es5b/routes/"+a+".ttl",e.prev=7,o=[{agents:r,modes:[g.AccessControlList.MODES.APPEND,g.AccessControlList.MODES.READ]}],s=new g.AccessControlList(t,i,i+".acl"),e.next=12,s.createACL(o);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}var At=a(30);function It(){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At.currentSession();case 2:return(t=e.sent)||(window.location.href="/login"),e.next=6,Object(et.b)(t.webId);case 6:return a=e.sent,n=a.getSubject(t.webId),r=n.getRef(Xe.d.storage),i=[],e.next=12,Dt(r+"private/viade_es5b/routes/");case 12:return i=e.sent,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(u.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt(t);case 2:if(a=e.sent,n=[],!a){e.next=14;break}r=0;case 6:if(!(r<a.files.length)){e.next=14;break}return e.next=9,yt(a.files[r].url);case 9:null!=(i=e.sent)&&(n=[].concat(Object(be.a)(n),[i]));case 11:r++,e.next=6;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tt=a(987);function Lt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(u.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t).then((function(e){a=e})).catch((function(e){return a=null}));case 2:if(null===a){e.next=7;break}if(null===(n=a.getSubject("#me"))){e.next=7;break}return r=n.getRef(Xe.a.inbox),e.abrupt("return",r);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t,a){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(a);case 2:return r=e.sent,e.next=5,Tt({method:"POST",uri:r,body:n,headers:{"Content-Type":"text/turtle"}},(function(e,t,a){return!e}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e){return zt.apply(this,arguments)}function zt(){return(zt=Object(u.a)(c.a.mark((function e(t){var a,n,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t);case 2:return a=e.sent,e.next=5,Object(et.b)(a);case 5:if(!(n=e.sent)){e.next=25;break}r=n.getSubject(a),i=r.getAllRefs(Xe.a.contains),o=[],s=0;case 11:if(!(s<i.length)){e.next=24;break}return e.prev=12,e.next=15,Object(et.b)(i[parseInt(s)]);case 15:(u=e.sent)&&(o=[].concat(Object(be.a)(o),[u])),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(12);case 21:s++,e.next=11;break;case 24:return e.abrupt("return",o);case 25:return e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[12,19]])})))).apply(this,arguments)}var Bt=a(30),qt=new(a(488))(Bt);function Vt(){return(Vt=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Bt.currentSession();case 3:return(r=e.sent)||(window.location.href="/login"),e.next=7,ut(r.webId);case 7:return i=e.sent,e.next=10,kt(r.webId,t);case 10:if(null===(o=e.sent)){e.next=32;break}return e.next=14,Ot(i,t);case 14:if(!((s=e.sent).length>0)){e.next=25;break}return e.next=18,_t(i,t);case 18:u=0;case 19:if(!(u<s.length)){e.next=25;break}return e.next=22,Jt(r.webId,s[u],t,a);case 22:u++,e.next=19;break;case 25:return e.next=27,Kt(r.webId,o);case 27:return e.next=29,qt.delete(o);case 29:return e.next=31,It();case 31:n=e.sent;case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(u.a)(c.a.mark((function e(t,a){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"private/viade_es5b/mySharedRoutes.ttl",e.next=3,Object(et.b)(t+"private/viade_es5b/mySharedRoutes.ttl");case 3:for(n=e.sent,r=n.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),i=0;i<r.length;i++)r[parseInt(i)].getLiteral(Xe.c.identifier)===a&&n.removeSubject(r[i].asRef());return e.next=8,n.save();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(u.a)(c.a.mark((function e(t,a){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(a);case 2:for(n=e.sent,r=n.getAllSubjectsOfType(Xe.c.MediaObject),i=0;i<r.length;i++)r[parseInt(i)].getRef(Xe.c.author)===t&&qt.delete(r[i].getRef(Xe.c.contentUrl));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t,a,n){return $t.apply(this,arguments)}function $t(){return($t=Object(u.a)(c.a.mark((function e(t,a,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht(t,a,"@prefix as: <https://www.w3.org/ns/activitystreams#> .\n    @prefix schema: <http://schema.org/> .\n    <> a as:Follow ;\n    schema:agent <".concat(t,'> ;\n    schema:Action "deleteRoute" ;\n    schema:comment "').concat(r,'" ;\n    schema:identifier "').concat(n,'" .\n    ')));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qt=a(30);function Yt(){return(Yt=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,Qt.currentSession();case 3:return(a=e.sent)||(window.location.href="/login"),e.next=7,Object(et.b)(a.webId);case 7:n=e.sent,r=n.getSubject(a.webId).getAllNodeRefs("http://xmlns.com/foaf/0.1/knows"),i=0;case 10:if(!(i<r.length)){e.next=18;break}return e.next=13,vt(r[i]);case 13:o=e.sent,t=[].concat(Object(be.a)(t),[o]);case 15:i++,e.next=10;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zt=a(30);function Xt(){return(Xt=Object(u.a)(c.a.mark((function e(t){var a,n,r,i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt.currentSession();case 2:return(a=e.sent)||(window.location.href="/login"),n=a.webId,r=!1,i=!1,e.next=9,Object(et.b)(n);case 9:for(o=e.sent,s=o.getSubject(n),u=s.getAllNodeRefs("http://xmlns.com/foaf/0.1/knows"),l=0;l<u.length;l+=1)u[l]===t&&(r=!0);return e.next=15,aa(t);case 15:if(e.t1=e.sent,!e.t1){e.next=18;break}e.t1=!r;case 18:if(e.t0=e.t1,!e.t0){e.next=21;break}e.t0=t!==n;case 21:if(!e.t0){e.next=25;break}return e.next=24,ea(n,t);case 24:i=!0;case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=Object(u.a)(c.a.mark((function e(t,a){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:return n=e.sent,(r=n.addSubject({identifier:a})).addRef(Xe.b.type,"http://xmlns.com/foaf/0.1/person"),(i=n.addSubject({identifier:"me"})).addRef("http://xmlns.com/foaf/0.1/knows",a),e.next=9,n.save([r,i]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e){return na.apply(this,arguments)}function na(){return(na=Object(u.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,Object(et.b)(t).then((function(e){n=e})).catch((function(e){return n=null}));case 3:return null!==n&&null!==(r=n.getSubject(t))&&null!==(i=r.getString("http://xmlns.com/foaf/0.1/name"))&&""!==i&&(a=!0),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ra=a(30);function ia(e,t){return oa.apply(this,arguments)}function oa(){return(oa=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra.currentSession();case 2:return(n=e.sent)||(window.location.href="/login"),r="private/viade_es5b/mySharedRoutes.ttl",i=n.webId,e.next=8,Object(et.b)(i);case 8:return o=e.sent,s=o.getSubject(i),u=s.getRef(Xe.d.storage),e.next=13,mt(u+"private/viade_es5b","mySharedRoutes.ttl");case 13:if(e.sent){e.next=17;break}return e.next=17,sa(u+r);case 17:return e.next=19,ua(u+r,t,a);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e){return ca.apply(this,arguments)}function ca(){return(ca=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(et.a)(t),e.next=3,a.save();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t,a){return la.apply(this,arguments)}function la(){return(la=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o,s,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.next=3,Object(et.b)(t);case 3:i=e.sent,o=null,s=i.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),u=0;case 7:if(!(u<s.length)){e.next=23;break}if(s[parseInt(u)].getLiteral(Xe.c.identifier)!==n){e.next=20;break}o=s[u],l=s[u].getAllRefs(Xe.c.agent),d=0;case 12:if(!(d<l.length)){e.next=19;break}if(l[d]!==a){e.next=16;break}return r=!1,e.abrupt("break",19);case 16:d++,e.next=12;break;case 19:return e.abrupt("break",23);case 20:u++,e.next=7;break;case 23:if(null===o&&((o=i.addSubject()).addLiteral(Xe.c.identifier,n),o.addRef(Xe.b.type,"http://arquisoft.github.io/viadeSpec/route")),!r){e.next=28;break}return o.addRef(Xe.c.agent,a),e.next=28,i.save([o]);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var da=a(30);function pa(){return(pa=Object(u.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,da.currentSession();case 3:return(r=e.sent)||(window.location.href="/login"),e.next=7,ia(t,a);case 7:if(!e.sent){e.next=12;break}return e.next=10,ma(r.webId,t,a);case 10:return e.next=12,Rt(r.webId,a);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ma(e,t,a){return ha.apply(this,arguments)}function ha(){return(ha=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht(t,a,"@prefix as: <https://www.w3.org/ns/activitystreams#> .\n    @prefix schema: <http://schema.org/> .\n    <> a as:Follow ;\n    schema:agent <".concat(t,'> ;\n    schema:Action "shareRoute" ;\n    schema:identifier "').concat(n,'" .\n    ')));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fa=a(30);function ga(e,t,a){return ba.apply(this,arguments)}function ba(){return(ba=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o,s,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.next=3,fa.currentSession();case 3:return(i=e.sent)||(window.location.href="/login"),o="private/viade_es5b/friendSharedRoutes.ttl",s=i.webId,e.next=9,Object(et.b)(s);case 9:return u=e.sent,l=u.getSubject(s),d=l.getRef(Xe.d.storage),e.next=14,mt(d+"private/viade_es5b","friendSharedRoutes.ttl");case 14:if(e.sent){e.next=18;break}return e.next=18,va(d+o);case 18:return e.next=20,ya(d+o,t,a,n);case 20:return r=e.sent,e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e){return xa.apply(this,arguments)}function xa(){return(xa=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(et.a)(t),e.next=3,a.save();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t,a,n){return Ea.apply(this,arguments)}function Ea(){return(Ea=Object(u.a)(c.a.mark((function e(t,a,n,r){var i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(t);case 2:i=e.sent,o=!1,s=i.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),u=0;case 6:if(!(u<s.length)){e.next=13;break}if(s[u].getRef(Xe.c.url)!==n){e.next=10;break}return o=!0,e.abrupt("break",13);case 10:u++,e.next=6;break;case 13:if(o){e.next=22;break}return(l=i.addSubject()).addRef(Xe.c.agent,a),l.addRef(Xe.c.url,n),l.addString(Xe.c.identifier,r),l.addRef(Xe.b.type,"http://arquisoft.github.io/viadeSpec/route"),e.next=21,i.save([l]);case 21:return e.abrupt("return",!0);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wa=a(30);function ka(e,t){return ja.apply(this,arguments)}function ja(){return(ja=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u,l,d,p,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,wa.currentSession();case 3:return(r=e.sent)||(window.location.href="/login"),i="private/viade_es5b/friendSharedRoutes.ttl",o=r.webId,e.next=9,Object(et.b)(o);case 9:return s=e.sent,u=s.getSubject(o),l=u.getRef(Xe.d.storage),e.next=14,mt(l+"private/viade_es5b","friendSharedRoutes.ttl");case 14:if(!e.sent){e.next=23;break}return e.next=18,Object(et.b)(l+i);case 18:for(d=e.sent,p=d.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),m=0;m<p.length;m++)p[m].getLiteral(Xe.c.identifier)===a&&p[m].getRef(Xe.c.agent)===t&&d.removeSubject(p[m].asRef());return e.next=23,d.save();case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oa=function(){function e(t,a,n){Object(l.a)(this,e),this.titulo=t,this.mensaje=a,this.tipo=n}return Object(d.a)(e,[{key:"getTitulo",value:function(){return this.titulo}},{key:"setTitulo",value:function(e){this.titulo=e}},{key:"getMensaje",value:function(){return this.mensaje}},{key:"setMensaje",value:function(e){this.mensaje=e}},{key:"getTipo",value:function(){return this.tipo}},{key:"setTipo",value:function(e){this.tipo=e}},{key:"toString",value:function(){}}]),e}(),Sa=a(30);function Ra(){return(Ra=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i,o,s,u,l,d,p,m,h,f,g,b,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa.currentSession();case 2:if(t=e.sent,a=[],!t){e.next=66;break}return e.next=7,Ut(t.webId);case 7:if(!((n=e.sent).length>0)){e.next=66;break}r=0;case 10:if(!(r<n.length)){e.next=66;break}if(i=n[r].getSubject(""),"shareRoute"!==(o=i.getString(Xe.c.action))){e.next=30;break}return s=i.getRef(Xe.c.agent),e.next=17,kt(s,i.getString(Xe.c.identifier));case 17:if(null===(u=e.sent)){e.next=28;break}return e.next=21,ga(s,u,i.getString(Xe.c.identifier));case 21:return e.next=23,yt(u);case 23:return l=e.sent,e.next=26,vt(s);case 26:d=e.sent,a=[].concat(Object(be.a)(a),[new Oa(d.getNombre()+" te ha Compartido una ruta!","Ruta : "+l.getNombre(),"success")]);case 28:return e.next=30,ft(n[r].asRef());case 30:if("commentRoute"!==o){e.next=42;break}return p=i.getRef(Xe.c.agent),e.next=34,yt(i.getRef(Xe.c.identifier));case 34:if(null===(m=e.sent)){e.next=40;break}return e.next=38,vt(p);case 38:h=e.sent,a=[].concat(Object(be.a)(a),[new Oa(h.getNombre()+" ha comentado","En "+m.getNombre()+": "+i.getString(Xe.c.comment),"info")]);case 40:return e.next=42,ft(n[r].asRef());case 42:if("mediaRoute"!==o){e.next=54;break}return f=i.getRef(Xe.c.agent),e.next=46,yt(i.getRef(Xe.c.identifier));case 46:if(null===(g=e.sent)){e.next=52;break}return e.next=50,vt(f);case 50:b=e.sent,a=[].concat(Object(be.a)(a),[new Oa(b.getNombre()+" subio un archivo","En "+g.getNombre()+": "+i.getString(Xe.c.MediaObject),"info")]);case 52:return e.next=54,ft(n[r].asRef());case 54:if("deleteRoute"!==o){e.next=63;break}return e.next=57,ka(i.getRef(Xe.c.agent),i.getString(Xe.c.identifier));case 57:return e.next=59,vt(i.getRef(Xe.c.agent));case 59:return v=e.sent,a=[].concat(Object(be.a)(a),[new Oa(v.getNombre()+" Ha borrado la ruta","Ruta : "+i.getString(Xe.c.comment),"danger")]),e.next=63,ft(n[r].asRef());case 63:r++,e.next=10;break;case 66:return e.abrupt("return",a);case 67:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ca=function(){function e(t,a){Object(l.a)(this,e),this.ruta=t,this.amigo=a}return Object(d.a)(e,[{key:"getAmigo",value:function(){return this.amigo}},{key:"getRuta",value:function(){return this.ruta}}]),e}(),Aa=a(30);function Ia(){return(Ia=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i,o,s,u,l,d,p,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa.currentSession();case 2:return(t=e.sent)||(window.location.href="/login"),e.next=6,Object(et.b)(t.webId);case 6:return a=e.sent,n=a.getSubject(t.webId),r=n.getRef(Xe.d.storage),i=[],e.next=12,mt(r+"private/viade_es5b","friendSharedRoutes.ttl");case 12:if(!e.sent){e.next=32;break}return e.next=15,Object(et.b)(r+"private/viade_es5b/friendSharedRoutes.ttl");case 15:if(null==(o=e.sent)){e.next=32;break}s=o.getAllSubjectsOfType("http://arquisoft.github.io/viadeSpec/route"),u=0;case 19:if(!(u<s.length)){e.next=32;break}return l=s[u].getRef(Xe.c.url),d=s[u].getRef(Xe.c.agent),e.next=24,yt(l);case 24:return p=e.sent,e.next=27,vt(d);case 27:m=e.sent,null!==p&&null!==m&&(i=[].concat(Object(be.a)(i),[new Ca(p,m)]));case 29:u++,e.next=19;break;case 32:return e.abrupt("return",i);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Na=a(30);function Da(){return(Da=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o,s,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.next=3,Na.currentSession();case 3:return(i=e.sent)||(window.location.href="/login"),o=i.webId,null===n&&(n=o),e.next=9,ut(n);case 9:return s=e.sent,e.next=12,kt(n,a);case 12:if(null===(u=e.sent)){e.next=33;break}return e.next=16,Fa(t,u,o);case 16:if(!(r=e.sent)){e.next=33;break}if(o!==n){e.next=31;break}return e.next=21,Ot(s,a);case 21:l=e.sent,d=0;case 23:if(!(d<l.length)){e.next=29;break}return e.next=26,La(o,l[d],u,t);case 26:d++,e.next=23;break;case 29:e.next=33;break;case 31:return e.next=33,La(o,n,u,t);case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t,a){return Ta.apply(this,arguments)}function Ta(){return(Ta=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(a);case 2:return r=e.sent,(i=r.addSubject()).addString(Xe.c.text,t.getTexto()),i.addDateTime(Xe.c.datePublished,t.getFecha()),i.addRef(Xe.c.author,n),i.addRef(Xe.b.type,"http://arquisoft.github.io/viadeSpec/userComment"),e.next=10,r.save([i]);case 10:return o=e.sent,e.abrupt("return",null!==o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t,a,n){return Pa.apply(this,arguments)}function Pa(){return(Pa=Object(u.a)(c.a.mark((function e(t,a,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht(t,a,"@prefix as: <https://www.w3.org/ns/activitystreams#> .\n    @prefix schema: <http://schema.org/> .\n    <> a as:Follow ;\n    schema:agent <".concat(t,'> ;\n    schema:Action "commentRoute" ;\n    schema:comment "').concat(r.getTexto(),'" ;\n    schema:identifier <').concat(n,"> .\n    ")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ha=a(30);function Ma(){return(Ma=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=null,e.next=4,Ha.currentSession();case 4:return(r=e.sent)||(window.location.href="/login"),e.next=8,kt(null==a?r.webId:a,t);case 8:if(null===(i=e.sent)){e.next=25;break}return e.next=12,Object(et.b)(i);case 12:o=e.sent,s=o.getSubjectsOfType("http://arquisoft.github.io/viadeSpec/userComment"),u=0;case 15:if(!(u<s.length)){e.next=25;break}return l=new Ie(s[u].getDateTime(Xe.c.datePublished),s[u].getString(Xe.c.text)),e.next=19,vt(s[u].getRef(Xe.c.author));case 19:d=e.sent,l.setAutor(d),n=[].concat(Object(be.a)(n),[l]);case 22:u++,e.next=15;break;case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ua=a(30);function za(){return(za=Object(u.a)(c.a.mark((function e(t,a,n){var r,i,o,s,l,d,p,m,h,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.next=3,Ua.currentSession();case 3:return(i=e.sent)||(window.location.href="/login"),o=i.webId,null===n&&(n=o),e.next=9,ut(o);case 9:return s=e.sent,e.next=12,kt(n,a);case 12:if(null===(l=e.sent)){e.next=34;break}for(d="",p=function(){var e=t[m];d=d+", "+e.name;var a=Object(Ye.v4)()+e.name,n=s+"public/viade_es5b/files/"+a,r=new FileReader;r.onload=function(){var t=Object(u.a)(c.a.mark((function t(a){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.target.result,t.next=3,Ua.fetch(n,{method:"PUT",force:!0,headers:{"content-type":e.type},body:r,credentials:"include"});case 3:t.sent.ok&&Ba(n,l,o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.readAsArrayBuffer(e)},m=0;m<t.length;m++)p();if(!(d.length>0)){e.next=34;break}if(o!==n){e.next=31;break}return e.next=21,Ot(s,a);case 21:h=e.sent,f=0;case 23:if(!(f<h.length)){e.next=29;break}return e.next=26,Va(o,h[f],l,d);case 26:f++,e.next=23;break;case 29:e.next=33;break;case 31:return e.next=33,Va(o,n,l,d);case 33:r=!0;case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(e,t,a){return qa.apply(this,arguments)}function qa(){return(qa=Object(u.a)(c.a.mark((function e(t,a,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.b)(a);case 2:return r=e.sent,(i=r.addSubject()).addRef(Xe.c.contentUrl,t),i.addRef(Xe.c.author,n),i.addRef(Xe.b.type,Xe.c.MediaObject),e.next=9,r.save([i]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t,a,n){return _a.apply(this,arguments)}function _a(){return(_a=Object(u.a)(c.a.mark((function e(t,a,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht(t,a,"@prefix as: <https://www.w3.org/ns/activitystreams#> .\n    @prefix schema: <http://schema.org/> .\n    <> a as:Follow ;\n    schema:agent <".concat(t,'> ;\n    schema:Action "mediaRoute" ;\n    schema:MediaObject "').concat(r,'" ;\n    schema:identifier <').concat(n,"> .\n    ")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wa=a(30);function Ka(){return(Ka=Object(u.a)(c.a.mark((function e(t,a){var n,r,i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=null,e.next=4,Wa.currentSession();case 4:return(r=e.sent)||(window.location.href="/login"),e.next=8,kt(null==a?r.webId:a,t);case 8:if(null===(i=e.sent)){e.next=15;break}return e.next=12,Object(et.b)(i);case 12:for(o=e.sent,s=o.getSubjectsOfType(Xe.c.MediaObject),u=0;u<s.length;u++)l=s[u].getRef(Xe.c.contentUrl),n=[].concat(Object(be.a)(n),[l]);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ga=a(30);function Ja(){return(Ja=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga.currentSession();case 2:return(t=e.sent)||(window.location.href="/login"),a=t.webId,e.next=7,g.AppPermission.checkPermissions(a);case 7:if(n=e.sent,r=g.AccessControlList.MODES,i=r.APPEND,o=r.READ,s=r.WRITE,u=r.CONTROL,null===n||null===n.permissions){e.next=14;break}if(![i,o,s,u].every((function(e){return n.permissions.includes(e)}))){e.next=14;break}return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $a=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"listarRutas",value:function(){return It()}},{key:"a\xf1adirRuta",value:function(e){return function(e){return at.apply(this,arguments)}(e)}},{key:"borrarRuta",value:function(e,t){return function(e,t){return Vt.apply(this,arguments)}(e,t)}},{key:"listarAmigos",value:function(){return function(){return Yt.apply(this,arguments)}()}},{key:"a\xf1adirAmigo",value:function(e){return function(e){return Xt.apply(this,arguments)}(e)}},{key:"compartirRuta",value:function(e,t){return function(e,t){return pa.apply(this,arguments)}(e,t)}},{key:"procesarRutasCompartidas",value:function(){return function(){return Ra.apply(this,arguments)}()}},{key:"listarRutasCompartidasConmigo",value:function(){return function(){return Ia.apply(this,arguments)}()}},{key:"comentarRuta",value:function(e,t,a){return function(e,t,a){return Da.apply(this,arguments)}(e,t,a)}},{key:"obtenerComentariosRuta",value:function(e,t){return function(e,t){return Ma.apply(this,arguments)}(e,t)}},{key:"getPersonByWebID",value:function(e){return vt(e)}},{key:"subirFicheroARuta",value:function(e,t,a){return function(e,t,a){return za.apply(this,arguments)}(e,t,a)}},{key:"obtenerFicherosRuta",value:function(e,t){return function(e,t){return Ka.apply(this,arguments)}(e,t)}},{key:"permisosAppValidos",value:function(){return function(){return Ja.apply(this,arguments)}()}}]),e}(),Qa=function(){function e(){Object(l.a)(this,e),this.BDRutas=[],this.inicializarBD()}return Object(d.a)(e,[{key:"inicializarBD",value:function(){var e=new Ze("Ruta-1",[43.534401,-5.909476],"Genial"),t=new Ze("Ruta-2",[43.361763,-5.847995],"Bien");e.addHito(new Qe("Hito-r1-1",43.531484,-5.911818)),e.addHito(new Qe("Hito-r1-2",43.528935,-5.914273)),t.addHito(new Qe("Hito-r2-1",43.362182,-5.84597)),t.addHito(new Qe("Hito-r2-2",43.363071,-5.846447)),this.BDRutas=[].concat(Object(be.a)(this.BDRutas),[e]),this.BDRutas=[].concat(Object(be.a)(this.BDRutas),[t])}},{key:"getRutas",value:function(){return $a.listarRutas()}},{key:"getRutasCompartidasConmigo",value:function(){return $a.listarRutasCompartidasConmigo()}},{key:"deleteRuta",value:function(e,t){return $a.borrarRuta(e,t)}},{key:"addRuta",value:function(e,t,a,n,r){t=parseFloat(t.replace(/\s+/g,"")),a=parseFloat(a.replace(/\s+/g,""));var i=new Ze(e,[t,a],n);for(var o in r)r[o].latitud=parseFloat(r[o].latitud.replace(/\s+/g,"")),r[o].longitud=parseFloat(r[o].longitud.replace(/\s+/g,"")),i.addHito(new Qe(r[o].nombre,r[o].latitud,r[o].longitud));return $a.a\u00f1adirRuta(i)}},{key:"addRutaObject",value:function(e){return $a.a\u00f1adirRuta(e)}},{key:"shareRuta",value:function(e,t){return $a.compartirRuta(e,t)}},{key:"procesarRutasCompartidas",value:function(){return $a.procesarRutasCompartidas()}},{key:"comentarRuta",value:function(e,t,a){return $a.comentarRuta(e,t,a)}},{key:"obtenerComentariosRuta",value:function(e,t){return $a.obtenerComentariosRuta(e,t)}},{key:"subirFicheroARuta",value:function(e,t,a){return $a.subirFicheroARuta(e,t,a)}},{key:"obtenerFicherosRuta",value:function(e,t){return $a.obtenerFicherosRuta(e,t)}},{key:"permisosAppValidos",value:function(){return $a.permisosAppValidos()}}]),e}(),Ya=function(){function e(){Object(l.a)(this,e),this.BDAmigos=[],this.inicializarBD()}return Object(d.a)(e,[{key:"inicializarBD",value:function(){var e=new bt("Pedro","https://pedro223.inrupt.net/profile/card#me",""),t=new bt("Alex","https://hamalawindows.solid.community/profile/card#me",""),a=new bt("Luc\xeda","https://uo265060.solid.community/profile/card#me","");this.BDAmigos=[].concat(Object(be.a)(this.BDAmigos),[e]),this.BDAmigos=[].concat(Object(be.a)(this.BDAmigos),[t]),this.BDAmigos=[].concat(Object(be.a)(this.BDAmigos),[a])}},{key:"getAmigos",value:function(){return $a.listarAmigos()}},{key:"addAmigo",value:function(e){return e=e.replace(/([^:]\/)\/+/g,"$1"),$a.a\u00f1adirAmigo(e)}},{key:"getPersonByWebID",value:function(e){return $a.getPersonByWebID(e)}}]),e}(),Za=a(1133),Xa=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={loading:!0},e.flyTo=function(e,t,a){a.current.leafletElement.flyTo(e,t)},e.handleLoaded=function(){e.setState({loading:!1})},e.rutaService=new Qa,e.amigoService=new Ya,e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(Za.a,null,r.a.createElement("h1",{className:"display-4","data-testid":"titleVerRutas"},"Mis rutas"),r.a.createElement("p",null,"Aqu\xed se muestra un listado con todas las rutas almacenadas en tu POD. Puedes ver los datos b\xe1sicos de cada una, agregarles comentarios y fotos, eliminarlas de tu POD o bien compartirlas con varios amigos. Adem\xe1s puedes utilizar la ",r.a.createElement("b",null,"tabla de hitos")," ","para hacer click sobre un hito y visualizarlo en el mapa."))),r.a.createElement($e,{text:"Espera un momento, estamos recuperando tus rutas...",children:r.a.createElement(_e,{handleLoaded:this.handleLoaded,permisosValidos:this.rutaService.permisosAppValidos(),getRutas:this.rutaService.getRutas,deleteRuta:this.rutaService.deleteRuta,shareRuta:this.rutaService.shareRuta,obtenerFicherosRuta:this.rutaService.obtenerFicherosRuta,subirFicheroARuta:this.rutaService.subirFicheroARuta,getAmigos:this.amigoService.getAmigos,comentarRuta:this.rutaService.comentarRuta,obtenerComentariosRuta:this.rutaService.obtenerComentariosRuta,showMap:!0,flyTo:this.flyTo}),loading:this.state.loading}))}}]),a}(n.Component),en=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"text-center"},"\xa9 Viade - Arquitectura del Software")}}]),a}(n.Component),tn=a(147),an=a(296),nn=a(70),rn=function(){return r.a.createElement(an.a,{bg:"primary",variant:"dark"},r.a.createElement(an.a.Brand,{href:"#/"},r.a.createElement("img",{alt:"",src:"/viade_es5b/img/viade2.png",width:"40",height:"40",className:"d-inline-block align-top"})," ",r.a.createElement("div",{className:" d-inline-block viade-brand"},"Viade-Rutas")),r.a.createElement(nn.a,{className:"ml-auto"},r.a.createElement(nn.a.Link,{href:"#/login"},"Log In"),r.a.createElement(nn.a.Link,{href:"#/signup"},"Sign Up")))},on=function(e){var t=e.component,a=Object(tn.a)(e,["component"]);return Object(g.useWebId)()?r.a.createElement(f.a,{to:"/"}):r.a.createElement(f.b,Object.assign({},a,{component:function(e){return r.a.createElement("div",null,r.a.createElement(rn,null),r.a.createElement(t,e))}}))},sn=a(30),cn=a.n(sn),un=function(e){return r.a.createElement(an.a,{bg:"primary",variant:"dark"},r.a.createElement(an.a.Brand,{href:"#/"},r.a.createElement("img",{alt:"",src:"/viade_es5b/img/viade2.png",width:"40",height:"40",className:"d-inline-block align-top"})," ",r.a.createElement("div",{className:" d-inline-block viade-brand"},"Viade-Rutas")),r.a.createElement(nn.a,null,r.a.createElement(nn.a.Link,{href:"#/ver-rutas"},"Mis rutas"),r.a.createElement(nn.a.Link,{href:"#/add-menu"},"Crear rutas"),r.a.createElement(nn.a.Link,{href:"#/friends"},"Amigos"),r.a.createElement(nn.a.Link,{href:"#/shared"},"Compartido conmigo")),r.a.createElement(nn.a,{className:"ml-auto"},r.a.createElement(nn.a.Link,{className:"logout",onClick:function(){cn.a.logout(),window.location="#/login"}},"Log Out")))},ln=function(e){var t=Object(g.useWebId)(),a=e.component,n=(e.service,Object(tn.a)(e,["component","service"]));return r.a.createElement(f.b,Object.assign({},n,{component:function(e){var n=e.history,i=e.location,o=e.match,s=e.service,c=e.name;return r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement(un,{history:n,location:i,match:o,webId:t,name:c}),r.a.createElement(a,{history:n,location:i,match:o,service:s})):r.a.createElement("div",null,r.a.createElement(rn,{history:n,location:i,match:o}),r.a.createElement("h1",null,"Usuario no autenticado no puede acceder a este URL, identif\xedquese")))}}))},dn=function(e){var t=Object(g.useWebId)(),a=e.component,n=Object(tn.a)(e,["component"]);return r.a.createElement(f.b,Object.assign({},n,{component:function(e){var n=e.history,i=e.location,o=e.match;return r.a.createElement("div",null,t?r.a.createElement(un,{history:n,location:i,match:o,webId:t}):r.a.createElement(rn,{history:n,location:i,match:o}),r.a.createElement(a,{history:n,location:i,match:o}))}}))},pn=(a(1109),a(1110),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:"",disabled:!0},e.handleKeyPress=function(t){var a=t.target.value;a.length>0?e.setState({disabled:!1}):e.setState({disabled:!0}),e.setState({value:a})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(de.a,{className:"first"},r.a.createElement(de.a.Header,{className:"bold","data-testid":"titleAgregarAmigo"},"Agregar nuevo amigo"),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Text,{"data-testid":"nuevoAmigo"},"Para agregar un nuevo amigo, introduce su WebID. El WebID puede cambiar seg\xfan el provedor del POD del usuario."),r.a.createElement(Ce.a,{className:"input"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,{"data-testid":"webID"},"WebID")),r.a.createElement(Ae.a.Control,{placeholder:"https://alex123.solid.community",onChange:this.handleKeyPress,"data-testid":"formAddFriend"})),r.a.createElement(ge.a,{"data-testid":"buttonAdd",className:"mt-2",disabled:this.state.disabled,onClick:function(){return e.props.handleAddFriend(e.state.value+"/profile/card#me")},type:"submit",variant:"success"},this.loading()))))}},{key:"loading",value:function(){return this.props.isLoading?r.a.createElement("div",null,r.a.createElement(ce.a,{"data-testid":"spinner",className:"mr-2",as:"span",size:"sm",animation:"border",role:"status"}),"Cargando..."):"Agregar"}}]),a}(n.Component)),mn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Tus amigos"),r.a.createElement("div",{className:"centered-container"},this.showComponent()))}},{key:"showComponent",value:function(){return this.props.noFriends?r.a.createElement(te.a,{variant:"warning","data-testid":"alertaNoAmigos"},"A\xfan no tienes ning\xfan amigo, agrega uno introduciendo su WebID"):r.a.createElement("table",{className:"table table-striped","data-testid":"tablaAmigos"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}),r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"WebID"))),r.a.createElement("tbody",null,this.props.amigos.map((function(e,t){return r.a.createElement("tr",{key:t++},r.a.createElement("th",{scope:"row"},r.a.createElement("img",{src:null!==e.getFoto()?e.getFoto():"/viade_es5b/img/defaultProfile.png",className:"rounded-circle",alt:"",width:"50",height:"50"})),r.a.createElement("td",null,e.getNombre()),r.a.createElement("td",null,e.getWebId()))}))))}}]),a}(n.Component),hn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(ze.a,{show:this.props.show},r.a.createElement(ze.a.Header,null,r.a.createElement(ze.a.Title,null,this.props.title)),r.a.createElement(ze.a.Body,null,this.props.message),r.a.createElement(ze.a.Footer,null,r.a.createElement(ge.a,{variant:"primary",onClick:this.props.handleAceptar},"Aceptar")))}}]),a}(n.Component),fn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={amigos:[],noFriends:!1,showDialog:!1,dialogMessage:"",showError:!1,loading:!1},e.handleAddFriend=function(){var t=Object(u.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,e.service.addAmigo(a);case 3:if(!t.sent){t.next=13;break}return t.t0=e,t.next=8,e.service.getAmigos();case 8:t.t1=t.sent,t.t2={showDialog:!0,showError:!1,dialogMessage:"El usuario ha sido agregado a tu lista de amigos.",amigos:t.t1},t.t0.setState.call(t.t0,t.t2),t.next=14;break;case 13:e.setState({showError:!0});case 14:e.setState({noFriends:0===e.state.amigos.length,loading:!1});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showError=function(){return e.state.showError&&r.a.createElement(te.a,{variant:"danger","data-testid":"alertNoExisteUsuario"},"No existe el usuario o ya est\xe1 presente en tu lista de amigos.")},e.service=new Ya,e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.service.getAmigos();case 3:e.t1=e.sent,e.t2={amigos:e.t1},e.t0.setState.call(e.t0,e.t2),0===this.state.amigos.length&&this.setState({noFriends:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{"data-testid":"componeteJUmbotron"},r.a.createElement(Za.a,null,r.a.createElement("h2",{className:"display-4","data-testid":"titleAmigos"},"Amigos"),r.a.createElement("p",{"data-testid":"gestionAmigos"},"Desde aqu\xed puedes realizar la gesti\xf3n de tus amigos.")),r.a.createElement(pn,{handleAddFriend:function(t){return e.handleAddFriend(t)},isLoading:this.state.loading,"data-testid":"componenteAddFriend"}),this.showError(),r.a.createElement(mn,{amigos:this.state.amigos,noFriends:this.state.noFriends}),r.a.createElement(hn,{show:this.state.showDialog,title:"Agregar un amigo",message:this.state.dialogMessage,handleAceptar:function(){return e.setState({showDialog:!1})}}))}}]),a}(n.Component),gn=a(228),bn=a.n(gn),vn=(a(1112),a(539)),xn=a.n(vn),yn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(Ke.a,{active:this.props.loading,spinner:r.a.createElement(xn.a,{size:35,color:"#50E3C2",css:{display:"block",margin:"0 43% 2vh"}}),text:this.props.text,styles:{wrapper:{width:"100%",height:"100vh"}}},this.props.children)}}]),a}(n.Component),En=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={rutasCompartidas:[],emptyList:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getRutasCompartidasConmigo();case 2:t=e.sent,this.setState({rutasCompartidas:t,emptyList:0===t.length}),this.props.handleLoaded();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Za.a,null,r.a.createElement("h2",{className:"display-4","data-testid":"title"},"Compartido conmigo"),r.a.createElement("p",{"data-testid":"textoCompartidoConmigo"},"En esta secci\xf3n puedes ver los detalles de las rutas que te han compartido tus amigos, junto con sus comentarios y fotos.")),this.state.emptyList&&r.a.createElement(te.a,{variant:"warning","data-testid":"alertaNoRutasCompartidas"},"A\xfan no te han compartido ninguna ruta."),this.state.rutasCompartidas.map((function(t,a){return r.a.createElement(de.a,{key:a++},r.a.createElement(de.a.Header,null,r.a.createElement("h4",null,t.getRuta().getNombre()),r.a.createElement("p",null,"Autor: ",r.a.createElement("b",null,t.getAmigo().getNombre()))),r.a.createElement(de.a.Body,null,r.a.createElement(pe.a,{fluid:!0},r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,{className:"mb-2"},r.a.createElement(he.a,null,r.a.createElement(de.a.Title,null,"Descripci\xf3n"),r.a.createElement(de.a.Text,null,t.getRuta().getDescripcion()))),r.a.createElement(me.a,{className:"mb-2"},r.a.createElement(he.a,null,r.a.createElement(Ne,{author:t.getAmigo(),ruta:t.getRuta(),onlyRead:!1,comentarRuta:e.props.comentarRuta,obtenerComentariosRuta:e.props.obtenerComentariosRuta}))),r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(Me,{author:t.getAmigo(),ruta:t.getRuta(),onlyRead:!1,subirFicheroARuta:e.props.subirFicheroARuta,obtenerFicherosRuta:e.props.obtenerFicherosRuta})))),r.a.createElement(he.a,null,e.props.showMap&&r.a.createElement(Re,{"data-testid":"map",ruta:t.getRuta()}))))))})))}}]),a}(n.Component),wn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.handleLoaded=function(){n.setState({loading:!1})},n.rutaService=new Qa,n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(yn,{text:"Recuperando rutas de tus colegas...",children:r.a.createElement(En,{handleLoaded:this.handleLoaded,getRutasCompartidasConmigo:this.rutaService.getRutasCompartidasConmigo,subirFicheroARuta:this.rutaService.subirFicheroARuta,obtenerFicherosRuta:this.rutaService.obtenerFicherosRuta,comentarRuta:this.rutaService.comentarRuta,obtenerComentariosRuta:this.rutaService.obtenerComentariosRuta,showMap:!0}),loading:this.state.loading})}}]),a}(n.Component),kn=a(1134),jn=a(1135),On=a(531),Sn=(a(1113),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={nameValue:"",latValue:"",lngValue:""},e.onChangeName=function(t){e.setState({nameValue:t.target.value})},e.onChangeLat=function(t){e.setState({latValue:parseFloat(t.target.value)})},e.onChangeLng=function(t){e.setState({lngValue:parseFloat(t.target.value)})},e.modificar=function(){var t=e.parseData(e.state);e.props.handleModifyPoint(t),e.props.handleClose()},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(ze.a,{show:this.props.showModal,centered:!0},r.a.createElement(ze.a.Header,null,r.a.createElement(ze.a.Title,null,"Modificar este hito")),r.a.createElement(ze.a.Body,null,r.a.createElement("p",null,"Deja en blanco aquellos campos que no quieras modificar."),null!=this.props.point&&r.a.createElement("div",null,r.a.createElement(Ce.a,{className:"mb-2"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,null,"Nombre")),r.a.createElement(On.a,{disabled:0===this.props.point.index,onChange:this.onChangeName,placeholder:this.props.point.name})),r.a.createElement(Ce.a,{className:"mb-2"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,null,"Latitud")),r.a.createElement(On.a,{onChange:this.onChangeLat,placeholder:this.props.point.latlng.lat,type:"number",step:"any"})),r.a.createElement(Ce.a,{className:"mb-2"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,null,"Longitud")),r.a.createElement(On.a,{onChange:this.onChangeLng,placeholder:this.props.point.latlng.lng,type:"number",step:"any"})))),r.a.createElement(ze.a.Footer,null,r.a.createElement(ge.a,{variant:"secondary",onClick:this.props.handleClose},"Cancelar"),r.a.createElement(ge.a,{onClick:this.modificar,"data-testid":"btModificar"},"Modificar")))}},{key:"parseData",value:function(e){var t={index:this.props.point.index,name:"",latlng:null};t.name=0===e.nameValue.length?this.props.point.name:e.nameValue;var a=0===e.latValue.length||isNaN(e.latValue)?this.props.point.latlng.lat:e.latValue,n=0===e.lngValue.length||isNaN(e.lngValue)?this.props.point.latlng.lng:e.lngValue;return t.latlng=je.a.latLng(a,n),t}}]),a}(n.Component));delete je.a.Icon.Default.prototype._getIconUrl,je.a.Icon.Default.mergeOptions({iconRetinaUrl:a(469),iconUrl:a(470),shadowUrl:a(471)});var Rn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={zoom:13,center:[],error:!1,showModal:!1,clickedPoint:null},e.showModal=function(t){e.setState({showModal:!0,clickedPoint:t})},e.hideModal=function(){e.setState({showModal:!1,clickedPoint:null})},e.getUserPosition=function(){window.navigator.geolocation.getCurrentPosition((function(t){var a=[];a.push(t.coords.latitude),a.push(t.coords.longitude),e.setState({center:a})}),(function(t){e.setState({error:!0})}))},e.handleClickOnMap=function(t){var a=e.props.points,n={index:a.length,name:0===a.length?"Inicio":"Punto ".concat(a.length),latlng:t.latlng};a.push(n),e.props.updatePoints(a)},e.deleteLastPoint=function(){var t=e.props.points,a=t.length-1;t.splice(a,1),e.props.updatePoints(t)},e.deleteAllPoints=function(){e.props.updatePoints([])},e.getPolyline=function(t){return r.a.createElement(we.a,{color:t,positions:e.props.points.map((function(e){return[e.latlng.lat,e.latlng.lng]}))})},e.handleModifyPoint=function(t){var a=e.props.points;a.splice(t.index,1,t),e.props.updatePoints(a)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getUserPosition()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,null!=this.state.center&&this.state.center.length>0&&r.a.createElement("div",null,r.a.createElement(kn.a,{className:"mb-2","aria-label":"Controles del mapa"},r.a.createElement(jn.a,{className:"mr-2"},r.a.createElement(ge.a,{onClick:this.deleteLastPoint,variant:"info"},"Borrar \xfaltimo punto")),r.a.createElement(jn.a,null,r.a.createElement(ge.a,{onClick:this.deleteAllPoints,variant:"info"},"Borrar todos los puntos"))),r.a.createElement(ve.a,{onclick:this.handleClickOnMap,center:this.state.center,zoom:this.state.zoom,doubleClickZoom:!1},r.a.createElement(xe.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.points.map((function(t,a){return r.a.createElement(ye.a,{position:t.latlng,key:a++,icon:1===a?Se:Oe,ondblclick:function(){return e.showModal(t)}},r.a.createElement(Ee.a,null,t.name))})),this.getPolyline("red")),this.state.showModal&&r.a.createElement(Sn,{showModal:this.state.showModal,handleClose:this.hideModal,handleModifyPoint:this.handleModifyPoint,point:this.state.clickedPoint})),this.state.error?r.a.createElement(te.a,{variant:"warning"},"Ha habido un error al cargar el mapa."):null)}}]),a}(n.Component),Cn=(a(1114),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={name:"",description:"",points:[],isAdding:!1,routeIsAdded:!1,invalidName:!1,invalidDescription:!1,invalidPoints:!1},n.updatePoints=function(e){n.setState({points:e})},n.handleAdd=Object(u.a)(c.a.mark((function e(){var t,a,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.name,a=n.state.description,r=n.state.points,n.setState({invalidName:!1,invalidDescription:!1,invalidPoints:!1}),null!=t&&0!==t.length){e.next=8;break}return n.setState({invalidName:!0}),n.props.handleScrollIntoView(n.nameField),e.abrupt("return");case 8:if(null!=a&&0!==a.length){e.next=12;break}return n.setState({invalidDescription:!0}),n.props.handleScrollIntoView(n.descriptionField),e.abrupt("return");case 12:if(!(null==r||r.length<2)){e.next=16;break}return n.setState({invalidPoints:!0}),n.props.handleScrollIntoView(n.pointsField),e.abrupt("return");case 16:for(u in i=r[0],o=r.slice(1).map((function(e){return new Qe(e.name,e.latlng.lat,e.latlng.lng)})),s=new Ze(t,[i.latlng.lat,i.latlng.lng],a),o)s.addHito(o[u]);return n.setState({isAdding:!0}),e.next=23,n.props.addRutaObject(s);case 23:if(!e.sent){e.next=25;break}n.setState({isAdding:!1,routeIsAdded:!0,name:"",description:"",points:[]});case 25:case"end":return e.stop()}}),e)}))),n.handleIsAdding=function(){return n.state.isAdding?r.a.createElement("div",null,r.a.createElement(ce.a,{as:"span",role:"status",animation:"border",size:"sm",className:"mr-2"}),"Agregando..."):"Agregar"},n.handleRouteAdded=function(){return n.state.routeIsAdded?r.a.createElement(hn,{show:!0,title:"Ruta creada",message:"Tu nueva ruta ha sido creada correctamente, puedes ir a echarle un vistazo al listado de rutas.",handleAceptar:function(){return n.setState({routeIsAdded:!1})}}):null},n.onChangeName=function(e){n.setState({name:e.target.value})},n.onChangeDescription=function(e){n.setState({description:e.target.value})},n.showErrorTooltTip=function(e,t,a,n){return r.a.createElement(ue.a,{target:e,show:t,placement:n},(function(e){return r.a.createElement(le.a,Object.assign({className:"error-tooltip"},e),a)}))},n.nameField=r.a.createRef(),n.descriptionField=r.a.createRef(),n.pointsField=r.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(pe.a,{fluid:!0},r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(de.a,{className:"mb-2",style:{width:"70vh"}},r.a.createElement(de.a.Header,null,"Datos b\xe1sicos"),r.a.createElement(de.a.Body,null,r.a.createElement(Ce.a,{className:"mb-3"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,null,"Nombre")),r.a.createElement(On.a,{placeholder:"Ruta de Avil\xe9s",onChange:this.onChangeName,value:this.state.name,ref:this.nameField,testid:"input-nombre"}),this.showErrorTooltTip(this.nameField,this.state.invalidName,"Nombre no v\xe1lido","right")),r.a.createElement(Ce.a,{className:"mb-3"},r.a.createElement(Ce.a.Prepend,null,r.a.createElement(Ce.a.Text,null,"Descripci\xf3n")),r.a.createElement(On.a,{placeholder:"Texto descriptivo de la ruta",as:"textarea",onChange:this.onChangeDescription,value:this.state.description,ref:this.descriptionField,testid:"input-descripcion"}),this.showErrorTooltTip(this.descriptionField,this.state.invalidDescription,"Descripci\xf3n no v\xe1lida","right")))))),r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(de.a,{className:"mb-2"},r.a.createElement(de.a.Header,{ref:this.pointsField},"Seleccionar los hitos de la ruta"),this.showErrorTooltTip(this.pointsField,this.state.invalidPoints,"La ruta debe tener al menos un Inicio y un Hito","top"),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Text,null,"Puedes utilizar el mapa de la parte inferior para seleccionar los puntos que conformar\xe1n tu ruta. Tambi\xe9n puedes hacer ",r.a.createElement("b",null,"doble click sobre un punto")," para modificar sus datos. Utiliza los botones de la barra superior para eliminar el \xfaltimo marcador o eliminar todos los marcadores."),this.props.showMap&&r.a.createElement(Rn,{points:this.state.points,updatePoints:this.updatePoints}))))),r.a.createElement(me.a,null,r.a.createElement(he.a,null,r.a.createElement(ge.a,{variant:"success",style:{padding:"12px 48px"},onClick:this.handleAdd,testid:"boton-agregar"},this.handleIsAdding())))),this.handleRouteAdded())}}]),a}(n.Component)),An=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleScrollIntoView=function(e){e.current.scrollIntoView({behavior:"smooth",block:"end"})},n.rutaService=new Qa,n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(Za.a,null,r.a.createElement("h1",{className:"display-4"},"A\xf1adir una ruta a trav\xe9s de un mapa"),r.a.createElement("p",null,"Desde aqu\xed podr\xe1s crear tu propia ruta personalizada, indicando sus datos b\xe1sicos y los hitos que la conforman."))),r.a.createElement(Cn,{addRutaObject:this.rutaService.addRutaObject,showMap:!0,handleScrollIntoView:this.handleScrollIntoView}))}}]),a}(n.Component),In=(a(1115),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(Za.a,null,r.a.createElement("h1",null,"Crear una nueva ruta"),r.a.createElement("p",null,"Selecciona el modo en el que deseas a\xf1adir una nueva ruta."))),r.a.createElement(pe.a,null,r.a.createElement(me.a,null,r.a.createElement(he.a,{role:"menu-item"},r.a.createElement("a",{href:"#/add-ruta","data-testid":"a-manual"},r.a.createElement(de.a,{className:"card-item"},r.a.createElement(de.a.Img,{variant:"top",src:"/viade_es5b/img/form-logo.png"}),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Title,{"data-testid":"manual"},"Crear manualmente"),r.a.createElement(de.a.Text,null,"Crea una nueva ruta introduciendo sus datos a mano a trav\xe9s de un formulario."))))),r.a.createElement(he.a,{role:"menu-item"},r.a.createElement("a",{href:"#/add-ruta-map","data-testid":"a-mapa"},r.a.createElement(de.a,{className:"card-item"},r.a.createElement(de.a.Img,{variant:"top",src:"/viade_es5b/img/map-logo.jpg"}),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Title,{"data-testid":"conmapa"},"Crear con un mapa"),r.a.createElement(de.a.Text,null,"Crea una ruta con la ayuda de un mapa interactivo sobre el que puedes ir haciendo click para ir dibujando tu ruta en el mapa."))))),r.a.createElement(he.a,{role:"menu-item"},r.a.createElement(de.a,{className:"card-item"},r.a.createElement(de.a.Img,{variant:"top",src:"/viade_es5b/img/file-logo.jpg"}),r.a.createElement(de.a.Body,null,r.a.createElement(de.a.Title,{"data-testid":"confichero"},"Crear a partir de fichero"),r.a.createElement(de.a.Text,null,"Crea una nueva ruta importando sus datos a partir de un fichero.")))))))}}]),a}(n.Component)),Nn=a(21),Dn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={nombre:"",longitudInicio:"",latitudInicio:"",descripcion:"",nombreHito:"",longitudHito:"",latitudHito:"",hitos:[],formulario1:!1,formulario2:!0},n.onChange=function(e){n.setState(Object(Nn.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){n.setState({formulario1:!0,formulario2:!1}),e.preventDefault()},n.onSubmit2=function(e){n.addHito(),e.preventDefault(),n.setState({nombreHito:"",longitudHito:"",latitudHito:""})},n.addHito=function(){var e={nombre:n.state.nombreHito,latitud:n.state.latitudHito,longitud:n.state.longitudHito};n.setState({hitos:[].concat(Object(be.a)(n.state.hitos),[e])})},n.crearRuta=function(e){n.setState({formulario1:!1,formulario2:!0}),n.rutaService.addRuta(n.state.nombre,n.state.latitudInicio,n.state.longitudInicio,n.state.descripcion,n.state.hitos),n.setState({nombre:"",longitudInicio:"",latitudInicio:"",descripcion:"",hitos:[]}),alert("La ruta "+n.state.nombre+" ha sido a\xf1adida correctamente")},n.rutaService=new Qa,n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"addRuta","data-testid":"panel-ruta"},r.a.createElement("h1",{"data-testid":"titleA\xf1adirRuta"},"A\xf1adir rutas:"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-nombreRuta"},"Nombre de la ruta:"),r.a.createElement("input",{required:!0,"data-testid":"in-nombreRuta",disabled:this.state.formulario1,className:"form-control",placeholder:"Ruta 21",type:"text",name:"nombre",value:this.state.nombre,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{"data-testid":"titlelugarInicio"},"Lugar de inicio:"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-latitudRuta"},"Latitud de la ruta:"),r.a.createElement("input",{required:!0,"data-testid":"in-latitudRuta",disabled:this.state.formulario1,className:"form-control",placeholder:"200",type:"text",name:"latitudInicio",value:this.state.latitudInicio,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-longitudRuta"},"Longitud de la ruta:"),r.a.createElement("input",{required:!0,"data-testid":"in-longitudRuta",disabled:this.state.formulario1,className:"form-control",placeholder:"100",type:"text",name:"longitudInicio",value:this.state.longitudInicio,onChange:this.onChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-descripcionRuta"},"Descripci\xf3n de la ruta:"),r.a.createElement("textarea",{"data-testid":"in-descripcionRuta",disabled:this.state.formulario1,className:"form-control",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:this.onChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary","data-testid":"addRouteButton",disabled:this.state.formulario1},"A\xf1adir ruta")),r.a.createElement("h2",{"data-testid":"titleA\xf1adirHito"},"A\xf1adir hitos para la ruta:"),r.a.createElement("form",{onSubmit:this.onSubmit2,disabled:this.state.formulario},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-nombreHito"},"Nombre del hito:"),r.a.createElement("input",{required:!0,"data-testid":"in-nombreHito",disabled:this.state.formulario2,className:"form-control",placeholder:"Hito 1",type:"text",name:"nombreHito",value:this.state.nombreHito,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-latitudHito"},"Latitud del hito:"),r.a.createElement("input",{required:!0,"data-testid":"in-latitudHito",disabled:this.state.formulario2,className:"form-control",placeholder:"300",type:"text",name:"latitudHito",value:this.state.latitudHito,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{"data-testid":"e-longitudHito"},"Longitud del hito:"),r.a.createElement("input",{required:!0,"data-testid":"in-longitudHito",disabled:this.state.formulario2,className:"form-control",placeholder:"200",type:"text",name:"longitudHito",value:this.state.longitudHito,onChange:this.onChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary","data-testid":"addHitoButton",disabled:this.state.formulario2},"A\xf1adir hito")),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.crearRuta,className:"btn btn-primary","data-testid":"saveRouteButton",disabled:this.state.formulario2},"Guardar ruta"))}}]),a}(n.Component),Fn=new Qa,Tn=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"procesarRutas",value:function(){Fn.procesarRutasCompartidas().then((function(e){for(var t=0;t<e.length;t++)gn.store.addNotification({title:e[0].getTitulo(),message:e[0].getMensaje(),type:e[0].getTipo(),insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}))}},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=setInterval(this.procesarRutas,1e4),this.setState({intervalId:t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"aplicacion"},r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(bn.a,null),r.a.createElement(f.d,null,r.a.createElement(dn,{exact:!0,path:"/",component:oe}),r.a.createElement(ln,{exact:!0,path:"/ver-rutas",component:Xa}),r.a.createElement(ln,{exact:!0,path:"/add-menu",component:In}),r.a.createElement(ln,{exact:!0,path:"/friends",component:fn}),r.a.createElement(ln,{exact:!0,path:"/shared",component:wn}),r.a.createElement(ln,{exact:!0,path:"/add-ruta",component:Dn}),r.a.createElement(ln,{exact:!0,path:"/add-ruta-map",component:An}),r.a.createElement(on,{exact:!0,path:"/login",component:z}),r.a.createElement(on,{exact:!0,path:"/signup",component:ee})))),r.a.createElement(en,null))}}]),a}(n.Component),Ln=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(1116);o.a.render(r.a.createElement(Tn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/viade_es5b",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/viade_es5b","/service-worker.js");Ln?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Pn(t,e)}))}}()},270:function(e,t,a){},545:function(e,t,a){e.exports=a(1117)},550:function(e,t,a){},580:function(e,t){},582:function(e,t){},606:function(e,t){},653:function(e,t){},654:function(e,t){},840:function(e,t){},841:function(e,t){},930:function(e,t,a){},931:function(e,t,a){},979:function(e,t,a){},997:function(e,t){},999:function(e,t){}},[[545,1,2]]]);
//# sourceMappingURL=main.a2157876.chunk.js.map